<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Git Submodule ë™ê¸°í™”</title>
    <style>
        body {
            font-family: 'Malgun Gothic', sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: #f8f9fa;
        }
        
        .container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .method-card {
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            background: #f8f9fa;
        }
        
        .method-card.recommended {
            border-color: #28a745;
            background: #d4edda;
        }
        
        .code-block {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 15px;
            font-family: monospace;
            font-size: 13px;
            margin: 10px 0;
            overflow-x: auto;
        }
        
        .pros-cons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 15px 0;
        }
        
        .pros {
            background: #d4edda;
            padding: 15px;
            border-radius: 6px;
        }
        
        .cons {
            background: #f8d7da;
            padding: 15px;
            border-radius: 6px;
        }
        
        button {
            background: #007bff;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 10px 20px;
            cursor: pointer;
            margin: 5px;
        }
        
        .architecture-diagram {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”— Git Submodule ê¸°ë°˜ ë™ê¸°í™” ì „ëµ</h1>
        <p>ë°ì´í„°ì™€ ì½”ë“œë¥¼ ë¶„ë¦¬í•˜ì—¬ ë…ë¦½ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ê³ ê¸‰ Git ë™ê¸°í™” ë°©ë²•</p>
        
        <!-- Submodule ì•„í‚¤í…ì²˜ -->
        <div class="method-card recommended">
            <h3>ğŸ—ï¸ Submodule ì•„í‚¤í…ì²˜</h3>
            <div class="architecture-diagram">
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; align-items: center;">
                    <div style="border: 2px solid #007bff; padding: 15px; border-radius: 8px;">
                        <strong>ë©”ì¸ ì €ì¥ì†Œ</strong><br>
                        donation-manager<br>
                        (ì½”ë“œ, ì˜¤ë²„ë ˆì´)
                    </div>
                    <div style="font-size: 24px;">â¬…ï¸â¡ï¸</div>
                    <div style="border: 2px solid #28a745; padding: 15px; border-radius: 8px;">
                        <strong>ë°ì´í„° ì €ì¥ì†Œ</strong><br>
                        donation-data<br>
                        (data.jsonë§Œ)
                    </div>
                </div>
                <div style="margin-top: 15px; color: #6c757d;">
                    ë°ì´í„°ëŠ” ë³„ë„ ì €ì¥ì†Œì—ì„œ ë…ë¦½ì ìœ¼ë¡œ ê´€ë¦¬ë˜ë©°,<br>
                    ë©”ì¸ ì €ì¥ì†Œì—ì„œ Submoduleë¡œ ì°¸ì¡°
                </div>
            </div>
        </div>
        
        <!-- ë°©ë²• 1: ë°ì´í„° ë¶„ë¦¬ -->
        <div class="method-card">
            <h3>1ï¸âƒ£ ë°ì´í„° ì €ì¥ì†Œ ë¶„ë¦¬</h3>
            <p>data.jsonì„ ë³„ë„ ì €ì¥ì†Œë¡œ ë¶„ë¦¬í•˜ì—¬ ë…ë¦½ì ìœ¼ë¡œ ê´€ë¦¬</p>
            
            <div class="code-block">
                # 1. ë°ì´í„° ì „ìš© ì €ì¥ì†Œ ìƒì„±
                mkdir donation-data
                cd donation-data
                git init
                
                # 2. data.jsonë§Œ ì´ë™
                mv ../data.json .
                git add data.json
                git commit -m "Initial data repository"
                
                # 3. GitHubì— í‘¸ì‹œ
                git remote add origin https://github.com/username/donation-data.git
                git push -u origin main
            </div>
            
            <div class="pros-cons">
                <div class="pros">
                    <h4>âœ… ì¥ì </h4>
                    <ul>
                        <li>ë°ì´í„°ì™€ ì½”ë“œ ì™„ì „ ë¶„ë¦¬</li>
                        <li>ë…ë¦½ì ì¸ ë²„ì „ ê´€ë¦¬</li>
                        <li>ë¹ ë¥¸ ë°ì´í„° ì—…ë°ì´íŠ¸</li>
                        <li>ê¶Œí•œ ì„¸ë¶„í™” ê°€ëŠ¥</li>
                    </ul>
                </div>
                <div class="cons">
                    <h4>âŒ ë‹¨ì </h4>
                    <ul>
                        <li>ì´ˆê¸° ì„¤ì • ë³µì¡</li>
                        <li>ì €ì¥ì†Œ 2ê°œ ê´€ë¦¬</li>
                        <li>Submodule ì´í•´ í•„ìš”</li>
                        <li>ë™ê¸°í™” ê³¼ì • ì¶”ê°€</li>
                    </ul>
                </div>
            </div>
            
            <button onclick="createDataRepository()">ë°ì´í„° ì €ì¥ì†Œ ìƒì„± ê°€ì´ë“œ</button>
        </div>
        
        <!-- ë°©ë²• 2: Submodule ì—°ê²° -->
        <div class="method-card">
            <h3>2ï¸âƒ£ Submoduleë¡œ ë°ì´í„° ì—°ê²°</h3>
            <p>ë©”ì¸ ì €ì¥ì†Œì—ì„œ ë°ì´í„° ì €ì¥ì†Œë¥¼ Submoduleë¡œ ì—°ê²°</p>
            
            <div class="code-block">
                # ë©”ì¸ ì €ì¥ì†Œì—ì„œ ì‹¤í–‰
                cd donation-manager
                
                # ë°ì´í„° ì €ì¥ì†Œë¥¼ Submoduleë¡œ ì¶”ê°€
                git submodule add https://github.com/username/donation-data.git data
                
                # Submodule ì´ˆê¸°í™”
                git submodule init
                git submodule update
                
                # ë³€ê²½ì‚¬í•­ ì»¤ë°‹
                git add .gitmodules data
                git commit -m "Add data submodule"
                git push
            </div>
            
            <button onclick="addSubmodule()">Submodule ì¶”ê°€ ê°€ì´ë“œ</button>
            <button onclick="updateSubmodule()">Submodule ì—…ë°ì´íŠ¸</button>
        </div>
        
        <!-- ë°©ë²• 3: ìë™ ë™ê¸°í™” -->
        <div class="method-card">
            <h3>3ï¸âƒ£ ìë™ Submodule ë™ê¸°í™”</h3>
            <p>ë°ì´í„° ë³€ê²½ ì‹œ ìë™ìœ¼ë¡œ Submoduleì„ ì—…ë°ì´íŠ¸í•˜ëŠ” ì‹œìŠ¤í…œ</p>
            
            <div class="code-block">
                # sync-submodule.sh
                #!/bin/bash
                
                echo "Submodule ë™ê¸°í™” ì‹œì‘..."
                
                # 1. ë°ì´í„° ì €ì¥ì†Œ ì—…ë°ì´íŠ¸
                cd data
                git add data.json
                git commit -m "ìë™ ë°ì´í„° ì—…ë°ì´íŠ¸: $(date)"
                git push origin main
                
                # 2. ë©”ì¸ ì €ì¥ì†Œì—ì„œ Submodule ì—…ë°ì´íŠ¸
                cd ..
                git submodule update --remote
                git add data
                git commit -m "Submodule ì—…ë°ì´íŠ¸: ìµœì‹  ë°ì´í„° ë°˜ì˜"
                git push origin main
                
                echo "Submodule ë™ê¸°í™” ì™„ë£Œ!"
            </div>
            
            <button onclick="createSyncScript()">ë™ê¸°í™” ìŠ¤í¬ë¦½íŠ¸ ìƒì„±</button>
            <button onclick="setupAutoSync()">ìë™ ë™ê¸°í™” ì„¤ì •</button>
        </div>
        
        <!-- ë°©ë²• 4: GitHub Actions ì—°ë™ -->
        <div class="method-card">
            <h3>4ï¸âƒ£ GitHub Actions ìë™ ì—°ë™</h3>
            <p>ë°ì´í„° ì €ì¥ì†Œ ë³€ê²½ ì‹œ ë©”ì¸ ì €ì¥ì†Œì˜ Submoduleì„ ìë™ ì—…ë°ì´íŠ¸</p>
            
            <div class="code-block">
                # .github/workflows/submodule-sync.yml
                name: Submodule Auto Sync
                
                on:
                  repository_dispatch:
                    types: [data-updated]
                  workflow_dispatch:
                
                jobs:
                  update-submodule:
                    runs-on: ubuntu-latest
                    steps:
                    - uses: actions/checkout@v4
                      with:
                        submodules: true
                        token: ${{ secrets.GITHUB_TOKEN }}
                    
                    - name: Update submodule
                      run: |
                        git submodule update --remote
                        git config --global user.email "action@github.com"
                        git config --global user.name "GitHub Action"
                        git add data
                        git commit -m "Auto-update submodule: latest data" || exit 0
                        git push
            </div>
            
            <button onclick="createActionsWorkflow()">Actions ì›Œí¬í”Œë¡œ ìƒì„±</button>
        </div>
        
        <!-- ë°©ë²• 5: ìŠ¤ë§ˆíŠ¸ ë™ê¸°í™” -->
        <div class="method-card recommended">
            <h3>5ï¸âƒ£ ìŠ¤ë§ˆíŠ¸ Submodule ë™ê¸°í™” (ê¶Œì¥)</h3>
            <p>JavaScriptì—ì„œ ì§ì ‘ Submoduleì„ ê´€ë¦¬í•˜ëŠ” í˜ì‹ ì ì¸ ë°©ë²•</p>
            
            <div class="code-block">
                // donation-manager.htmlì—ì„œ ì§ì ‘ Submodule ë™ê¸°í™”
                async function syncSubmoduleData() {
                    try {
                        // 1. ë°ì´í„° ì €ì¥ì†Œì—ì„œ ìµœì‹  ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
                        const dataResponse = await fetch('https://raw.githubusercontent.com/username/donation-data/main/data.json');
                        const newData = await dataResponse.json();
                        
                        // 2. ë¡œì»¬ ë°ì´í„°ì™€ ë¹„êµ
                        const localData = JSON.parse(localStorage.getItem('donation_data') || '[]');
                        
                        if (JSON.stringify(newData) !== JSON.stringify(localData)) {
                            // 3. ë³€ê²½ì‚¬í•­ ê°ì§€ ì‹œ ì—…ë°ì´íŠ¸
                            updateLocalStorage(newData);
                            
                            // 4. ë©”ì¸ ì €ì¥ì†Œì˜ Submodule ì°¸ì¡° ì—…ë°ì´íŠ¸
                            await updateSubmoduleReference();
                            
                            console.log('âœ… Submodule ìŠ¤ë§ˆíŠ¸ ë™ê¸°í™” ì™„ë£Œ');
                        }
                        
                    } catch (error) {
                        console.error('Submodule ë™ê¸°í™” ì‹¤íŒ¨:', error);
                    }
                }
            </div>
            
            <button onclick="implementSmartSync()">ìŠ¤ë§ˆíŠ¸ ë™ê¸°í™” êµ¬í˜„</button>
            <button onclick="testSubmoduleSync()">ë™ê¸°í™” í…ŒìŠ¤íŠ¸</button>
        </div>
        
        <!-- ë¹„êµ ë¶„ì„ -->
        <div class="method-card">
            <h3>ğŸ“Š Git ë™ê¸°í™” ë°©ë²• ì¢…í•© ë¹„êµ</h3>
            
            <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
                <thead>
                    <tr style="background: #f8f9fa;">
                        <th style="border: 1px solid #dee2e6; padding: 12px;">ë°©ë²•</th>
                        <th style="border: 1px solid #dee2e6; padding: 12px;">ë³µì¡ë„</th>
                        <th style="border: 1px solid #dee2e6; padding: 12px;">ì•ˆì •ì„±</th>
                        <th style="border: 1px solid #dee2e6; padding: 12px;">ì†ë„</th>
                        <th style="border: 1px solid #dee2e6; padding: 12px;">ì¶”ì²œë„</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="border: 1px solid #dee2e6; padding: 12px;"><strong>Deploy Keys</strong></td>
                        <td style="border: 1px solid #dee2e6; padding: 12px;">â­â­</td>
                        <td style="border: 1px solid #dee2e6; padding: 12px;">â­â­â­â­â­</td>
                        <td style="border: 1px solid #dee2e6; padding: 12px;">â­â­â­â­â­</td>
                        <td style="border: 1px solid #dee2e6; padding: 12px;">ğŸ† ìµœê³ </td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #dee2e6; padding: 12px;"><strong>Tree API</strong></td>
                        <td style="border: 1px solid #dee2e6; padding: 12px;">â­â­â­</td>
                        <td style="border: 1px solid #dee2e6; padding: 12px;">â­â­â­â­</td>
                        <td style="border: 1px solid #dee2e6; padding: 12px;">â­â­â­â­</td>
                        <td style="border: 1px solid #dee2e6; padding: 12px;">ğŸ¥ˆ ìš°ìˆ˜</td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #dee2e6; padding: 12px;"><strong>Submodule</strong></td>
                        <td style="border: 1px solid #dee2e6; padding: 12px;">â­â­â­â­</td>
                        <td style="border: 1px solid #dee2e6; padding: 12px;">â­â­â­â­</td>
                        <td style="border: 1px solid #dee2e6; padding: 12px;">â­â­â­</td>
                        <td style="border: 1px solid #dee2e6; padding: 12px;">ğŸ¥‰ ì¢‹ìŒ</td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #dee2e6; padding: 12px;"><strong>Webhook</strong></td>
                        <td style="border: 1px solid #dee2e6; padding: 12px;">â­â­â­â­â­</td>
                        <td style="border: 1px solid #dee2e6; padding: 12px;">â­â­â­</td>
                        <td style="border: 1px solid #dee2e6; padding: 12px;">â­â­â­â­â­</td>
                        <td style="border: 1px solid #dee2e6; padding: 12px;">ğŸ”§ ê³ ê¸‰</td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #dee2e6; padding: 12px;"><strong>Contents API</strong></td>
                        <td style="border: 1px solid #dee2e6; padding: 12px;">â­â­</td>
                        <td style="border: 1px solid #dee2e6; padding: 12px;">â­â­</td>
                        <td style="border: 1px solid #dee2e6; padding: 12px;">â­â­</td>
                        <td style="border: 1px solid #dee2e6; padding: 12px;">ğŸ’¤ ê¸°ë³¸</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // ë°ì´í„° ì €ì¥ì†Œ ìƒì„± ê°€ì´ë“œ
        function createDataRepository() {
            const guide = `
ë°ì´í„° ì €ì¥ì†Œ ìƒì„± ë‹¨ê³„:

1. GitHubì—ì„œ ìƒˆ ì €ì¥ì†Œ ìƒì„±
   - ì´ë¦„: donation-data
   - Public/Private ì„ íƒ
   - README ì²´í¬ í•´ì œ

2. ë¡œì»¬ì—ì„œ ë°ì´í„° ë¶„ë¦¬
   mkdir donation-data
   cd donation-data
   git init
   
3. ê¸°ì¡´ data.json ì´ë™
   cp ../data.json .
   git add data.json
   git commit -m "Initial data repository"
   
4. GitHub ì—°ê²°
   git remote add origin https://github.com/username/donation-data.git
   git push -u origin main

ì™„ë£Œ í›„ "Submodule ì¶”ê°€ ê°€ì´ë“œ" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.
            `;
            
            alert(guide);
        }
        
        // Submodule ì¶”ê°€ ê°€ì´ë“œ
        function addSubmodule() {
            const guide = `
ë©”ì¸ ì €ì¥ì†Œì— Submodule ì¶”ê°€:

1. ë©”ì¸ ì €ì¥ì†Œ ë””ë ‰í† ë¦¬ì—ì„œ
   cd donation-manager
   
2. Submodule ì¶”ê°€
   git submodule add https://github.com/username/donation-data.git data
   
3. ì´ˆê¸°í™”
   git submodule init
   git submodule update
   
4. ì»¤ë°‹
   git add .gitmodules data
   git commit -m "Add data submodule"
   git push origin main

ì´ì œ data/ í´ë”ì—ì„œ data.jsonì„ ë…ë¦½ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            `;
            
            alert(guide);
        }
        
        // Submodule ì—…ë°ì´íŠ¸
        function updateSubmodule() {
            const updateCommands = `
Submodule ì—…ë°ì´íŠ¸ ëª…ë ¹ì–´:

1. ìµœì‹  ë°ì´í„°ë¡œ ì—…ë°ì´íŠ¸
   git submodule update --remote
   
2. íŠ¹ì • Submoduleë§Œ ì—…ë°ì´íŠ¸
   git submodule update --remote data
   
3. ë³€ê²½ì‚¬í•­ ì»¤ë°‹
   git add data
   git commit -m "Update data submodule"
   git push

ìë™í™”í•˜ë ¤ë©´ "ë™ê¸°í™” ìŠ¤í¬ë¦½íŠ¸ ìƒì„±" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.
            `;
            
            alert(updateCommands);
        }
        
        // ë™ê¸°í™” ìŠ¤í¬ë¦½íŠ¸ ìƒì„±
        function createSyncScript() {
            const script = `#!/bin/bash
# Submodule ìë™ ë™ê¸°í™” ìŠ¤í¬ë¦½íŠ¸

echo "ğŸ”— Submodule ë™ê¸°í™” ì‹œì‘..."

# 1. ë°ì´í„° ì €ì¥ì†Œì—ì„œ ë³€ê²½ì‚¬í•­ í‘¸ì‹œ
echo "ğŸ“Š ë°ì´í„° ì €ì¥ì†Œ ì—…ë°ì´íŠ¸ ì¤‘..."
cd data
git add data.json
git commit -m "ìë™ ë°ì´í„° ì—…ë°ì´íŠ¸: $(date '+%Y-%m-%d %H:%M:%S')"
git push origin main

# 2. ë©”ì¸ ì €ì¥ì†Œë¡œ ì´ë™
cd ..

# 3. Submodule ì—…ë°ì´íŠ¸
echo "ğŸ”„ Submodule ì—…ë°ì´íŠ¸ ì¤‘..."
git submodule update --remote

# 4. ë©”ì¸ ì €ì¥ì†Œì—ì„œ Submodule ì°¸ì¡° ì—…ë°ì´íŠ¸
git add data
git commit -m "ìë™ Submodule ì—…ë°ì´íŠ¸: ìµœì‹  ë°ì´í„° ë°˜ì˜"
git push origin main

echo "âœ… Submodule ë™ê¸°í™” ì™„ë£Œ!"
echo "GitHub Pagesì—ì„œ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤."`;
            
            // ìŠ¤í¬ë¦½íŠ¸ ë‹¤ìš´ë¡œë“œ
            const blob = new Blob([script], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'sync-submodule.sh';
            a.click();
            URL.revokeObjectURL(url);
            
            alert('Submodule ë™ê¸°í™” ìŠ¤í¬ë¦½íŠ¸ê°€ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!\n\níŒŒì¼: sync-submodule.sh\nì‚¬ìš©ë²•: ./sync-submodule.sh');
        }
        
        // ìë™ ë™ê¸°í™” ì„¤ì •
        function setupAutoSync() {
            const instructions = `
ìë™ ë™ê¸°í™” ì„¤ì • ë°©ë²•:

1. ìŠ¤í¬ë¦½íŠ¸ ê¶Œí•œ ì„¤ì •
   chmod +x sync-submodule.sh

2. Cronìœ¼ë¡œ ìë™ ì‹¤í–‰ (ì˜ˆ: 5ë¶„ë§ˆë‹¤)
   crontab -e
   ì¶”ê°€: */5 * * * * /path/to/sync-submodule.sh

3. ë˜ëŠ” Git Hook ì‚¬ìš©
   .git/hooks/post-commitì— ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€

4. Windowsì—ì„œëŠ” ì‘ì—… ìŠ¤ì¼€ì¤„ëŸ¬ ì‚¬ìš©
   - ì‘ì—… ìŠ¤ì¼€ì¤„ëŸ¬ ì—´ê¸°
   - ê¸°ë³¸ ì‘ì—… ë§Œë“¤ê¸°
   - ë™ì‘: sync-submodule.bat ì‹¤í–‰

ì´ì œ ë°ì´í„° ë³€ê²½ ì‹œ ìë™ìœ¼ë¡œ ë™ê¸°í™”ë©ë‹ˆë‹¤!
            `;
            
            alert(instructions);
        }
        
        // GitHub Actions ì›Œí¬í”Œë¡œ ìƒì„±
        function createActionsWorkflow() {
            const workflow = `name: Auto Update Submodule

on:
  repository_dispatch:
    types: [data-updated]
  schedule:
    - cron: '*/5 * * * *'  # 5ë¶„ë§ˆë‹¤ ì‹¤í–‰
  workflow_dispatch:

jobs:
  update-submodule:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
      with:
        submodules: true
        token: \${{ secrets.GITHUB_TOKEN }}
    
    - name: Update submodule
      run: |
        git config --global user.email "action@github.com"
        git config --global user.name "GitHub Action"
        
        # Submodule ì—…ë°ì´íŠ¸
        git submodule update --remote
        
        # ë³€ê²½ì‚¬í•­ì´ ìˆëŠ”ì§€ í™•ì¸
        if ! git diff --quiet data; then
          git add data
          git commit -m "ìë™ Submodule ì—…ë°ì´íŠ¸: \$(date)"
          git push
          echo "âœ… Submodule ì—…ë°ì´íŠ¸ ì™„ë£Œ"
        else
          echo "â„¹ï¸ ì—…ë°ì´íŠ¸í•  ë³€ê²½ì‚¬í•­ ì—†ìŒ"
        fi`;
            
            // ì›Œí¬í”Œë¡œ ë‹¤ìš´ë¡œë“œ
            const blob = new Blob([workflow], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'submodule-sync.yml';
            a.click();
            URL.revokeObjectURL(url);
            
            alert('GitHub Actions ì›Œí¬í”Œë¡œê°€ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!\n\níŒŒì¼: submodule-sync.yml\nìœ„ì¹˜: .github/workflows/ í´ë”ì— ì €ì¥');
        }
        
        // ìŠ¤ë§ˆíŠ¸ ë™ê¸°í™” êµ¬í˜„
        function implementSmartSync() {
            const smartSyncCode = `
// donation-manager.htmlì— ì¶”ê°€í•  ìŠ¤ë§ˆíŠ¸ Submodule ë™ê¸°í™” ì½”ë“œ

class SubmoduleSync {
    constructor() {
        this.dataRepoUrl = 'https://raw.githubusercontent.com/username/donation-data/main/data.json';
        this.lastSyncTime = localStorage.getItem('last-submodule-sync') || 0;
    }
    
    async checkForUpdates() {
        try {
            // ë°ì´í„° ì €ì¥ì†Œì—ì„œ ìµœì‹  ë°ì´í„° í™•ì¸
            const response = await fetch(this.dataRepoUrl + '?t=' + Date.now());
            const remoteData = await response.json();
            
            // ë¡œì»¬ ë°ì´í„°ì™€ ë¹„êµ
            const localDataStr = localStorage.getItem('donation_data');
            const remoteDataStr = JSON.stringify(remoteData.donations || []);
            
            if (localDataStr !== remoteDataStr) {
                console.log('ğŸ”„ Submodule ë°ì´í„° ë³€ê²½ ê°ì§€');
                return remoteData;
            }
            
            return null;
        } catch (error) {
            console.error('Submodule ì²´í¬ ì‹¤íŒ¨:', error);
            return null;
        }
    }
    
    async syncData(newData) {
        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì—…ë°ì´íŠ¸
        this.updateLocalStorage(newData);
        
        // ë¸Œë¡œë“œìºìŠ¤íŠ¸ë¡œ ì˜¤ë²„ë ˆì´ë“¤ì—ê²Œ ì•Œë¦¼
        if (window.BroadcastChannel) {
            const channel = new BroadcastChannel('donation-sync');
            channel.postMessage({
                type: 'DATA_UPDATE',
                payload: newData,
                source: 'submodule'
            });
            channel.close();
        }
        
        // ë§ˆì§€ë§‰ ë™ê¸°í™” ì‹œê°„ ì—…ë°ì´íŠ¸
        localStorage.setItem('last-submodule-sync', Date.now());
        
        console.log('âœ… Submodule ìŠ¤ë§ˆíŠ¸ ë™ê¸°í™” ì™„ë£Œ');
    }
    
    updateLocalStorage(data) {
        if (data.donations) {
            localStorage.setItem('donation_data', JSON.stringify(data.donations));
        }
        // ... ë‹¤ë¥¸ ë°ì´í„°ë„ ì—…ë°ì´íŠ¸
    }
    
    startAutoSync(intervalMs = 30000) {
        setInterval(async () => {
            const newData = await this.checkForUpdates();
            if (newData) {
                await this.syncData(newData);
            }
        }, intervalMs);
        
        console.log('ğŸš€ Submodule ìë™ ë™ê¸°í™” ì‹œì‘ë¨');
    }
}

// ì‚¬ìš©ë²•
const submoduleSync = new SubmoduleSync();
submoduleSync.startAutoSync(); // 30ì´ˆë§ˆë‹¤ ì²´í¬
            `;
            
            // ì½”ë“œ ë‹¤ìš´ë¡œë“œ
            const blob = new Blob([smartSyncCode], { type: 'text/javascript' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'submodule-smart-sync.js';
            a.click();
            URL.revokeObjectURL(url);
            
            alert('ìŠ¤ë§ˆíŠ¸ Submodule ë™ê¸°í™” ì½”ë“œê°€ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!\n\níŒŒì¼: submodule-smart-sync.js\nì‚¬ìš©ë²•: donation-manager.htmlì— ì½”ë“œ ì¶”ê°€');
        }
        
        // ë™ê¸°í™” í…ŒìŠ¤íŠ¸
        function testSubmoduleSync() {
            const testSteps = `
Submodule ë™ê¸°í™” í…ŒìŠ¤íŠ¸ ë‹¨ê³„:

1. ë°ì´í„° ì €ì¥ì†Œì—ì„œ data.json ìˆ˜ì •
2. ë³€ê²½ì‚¬í•­ ì»¤ë°‹ ë° í‘¸ì‹œ
3. ë©”ì¸ ì €ì¥ì†Œì—ì„œ ë™ê¸°í™” ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
4. ì˜¤ë²„ë ˆì´ì—ì„œ ë³€ê²½ì‚¬í•­ í™•ì¸

í…ŒìŠ¤íŠ¸ ëª…ë ¹ì–´:
# ë°ì´í„° ì €ì¥ì†Œ
cd data
echo '{"test": true}' >> data.json
git add data.json
git commit -m "í…ŒìŠ¤íŠ¸ ë°ì´í„° ì¶”ê°€"
git push

# ë©”ì¸ ì €ì¥ì†Œ
cd ..
./sync-submodule.sh

ì„±ê³µí•˜ë©´ Submodule ë™ê¸°í™”ê°€ ì™„ë£Œëœ ê²ƒì…ë‹ˆë‹¤!
            `;
            
            alert(testSteps);
        }
        
        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', () => {
            console.log('Git Submodule ë™ê¸°í™” ê°€ì´ë“œ ë¡œë“œë¨');
        });
    </script>
</body>
</html>