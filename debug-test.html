<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë””ë²„ê·¸ í…ŒìŠ¤íŠ¸</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; }
        .status { padding: 15px; margin: 10px 0; border-radius: 6px; }
        .status-info { background: #e7f3ff; border: 1px solid #cbe3ff; }
        .status-success { background: #e9f6ec; border: 1px solid #cce8d2; }
        .status-error { background: #fde9e9; border: 1px solid #f8d0d1; }
        .btn { padding: 10px 15px; margin: 5px; border: none; border-radius: 4px; cursor: pointer; }
        .btn-primary { background: #007bff; color: white; }
        .log { background: #f8f9fa; padding: 15px; border-radius: 4px; font-family: monospace; white-space: pre-wrap; max-height: 300px; overflow-y: auto; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” YouTube API ë””ë²„ê·¸ í…ŒìŠ¤íŠ¸</h1>
        
        <div id="status" class="status status-info">
            ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì¤‘...
        </div>
        
        <div>
            <h3>í…ŒìŠ¤íŠ¸ ë²„íŠ¼ë“¤</h3>
            <button onclick="testBasic()" class="btn btn-primary">1. ê¸°ë³¸ í…ŒìŠ¤íŠ¸</button>
            <button onclick="testGapi()" class="btn btn-primary">2. GAPI ë¡œë“œ í…ŒìŠ¤íŠ¸</button>
            <button onclick="testApiKey()" class="btn btn-primary">3. API í‚¤ í…ŒìŠ¤íŠ¸</button>
            <button onclick="testYoutube()" class="btn btn-primary">4. YouTube API í…ŒìŠ¤íŠ¸</button>
            <button onclick="clearLog()" class="btn btn-primary">ë¡œê·¸ ì§€ìš°ê¸°</button>
        </div>
        
        <div>
            <h3>ë¡œê·¸</h3>
            <div id="log" class="log">ë¡œê·¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...</div>
        </div>
    </div>

    <script src="https://apis.google.com/js/api.js"></script>
    <script>
        const API_KEY = 'AIzaSyBz5aGfiAQCrfi0ccydGypD0leYjLUt4t4';
        
        function log(message) {
            const logEl = document.getElementById('log');
            const time = new Date().toLocaleTimeString();
            logEl.textContent += `[${time}] ${message}\n`;
            logEl.scrollTop = logEl.scrollHeight;
            console.log(message);
        }
        
        function updateStatus(message, type = 'info') {
            const statusEl = document.getElementById('status');
            statusEl.className = `status status-${type}`;
            statusEl.textContent = message;
            log(`ìƒíƒœ: ${message}`);
        }
        
        // 1. ê¸°ë³¸ í…ŒìŠ¤íŠ¸
        function testBasic() {
            log('=== ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ì‹œì‘ ===');
            log('í˜„ì¬ URL: ' + window.location.href);
            log('User Agent: ' + navigator.userAgent);
            log('gapi ì¡´ì¬ ì—¬ë¶€: ' + (typeof gapi !== 'undefined'));
            updateStatus('ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ì™„ë£Œ', 'success');
        }
        
        // 2. GAPI ë¡œë“œ í…ŒìŠ¤íŠ¸
        async function testGapi() {
            log('=== GAPI ë¡œë“œ í…ŒìŠ¤íŠ¸ ì‹œì‘ ===');
            updateStatus('GAPI ë¡œë“œ ì¤‘...', 'info');
            
            try {
                await new Promise((resolve, reject) => {
                    const timeout = setTimeout(() => {
                        reject(new Error('GAPI ë¡œë“œ íƒ€ì„ì•„ì›ƒ'));
                    }, 10000);
                    
                    gapi.load('client', () => {
                        clearTimeout(timeout);
                        log('âœ… GAPI í´ë¼ì´ì–¸íŠ¸ ë¡œë“œ ì„±ê³µ');
                        resolve();
                    });
                });
                
                updateStatus('GAPI ë¡œë“œ ì„±ê³µ!', 'success');
                
            } catch (error) {
                log('âŒ GAPI ë¡œë“œ ì‹¤íŒ¨: ' + error.message);
                updateStatus('GAPI ë¡œë“œ ì‹¤íŒ¨: ' + error.message, 'error');
            }
        }
        
        // 3. API í‚¤ í…ŒìŠ¤íŠ¸
        async function testApiKey() {
            log('=== API í‚¤ í…ŒìŠ¤íŠ¸ ì‹œì‘ ===');
            updateStatus('API í‚¤ë¡œ ì´ˆê¸°í™” ì¤‘...', 'info');
            
            try {
                await gapi.client.init({
                    apiKey: API_KEY
                });
                
                log('âœ… API í‚¤ ì´ˆê¸°í™” ì„±ê³µ');
                updateStatus('API í‚¤ ì´ˆê¸°í™” ì„±ê³µ!', 'success');
                
            } catch (error) {
                log('âŒ API í‚¤ ì´ˆê¸°í™” ì‹¤íŒ¨: ' + error.message);
                updateStatus('API í‚¤ ì´ˆê¸°í™” ì‹¤íŒ¨: ' + error.message, 'error');
            }
        }
        
        // 4. YouTube API í…ŒìŠ¤íŠ¸
        async function testYoutube() {
            log('=== YouTube API í…ŒìŠ¤íŠ¸ ì‹œì‘ ===');
            updateStatus('YouTube API í˜¸ì¶œ ì¤‘...', 'info');
            
            try {
                // YouTube API ë¡œë“œ
                await gapi.client.load('youtube', 'v3');
                log('âœ… YouTube API ë¡œë“œ ì„±ê³µ');
                
                // ê°„ë‹¨í•œ ê²€ìƒ‰ ìš”ì²­
                const response = await gapi.client.youtube.search.list({
                    part: 'snippet',
                    q: 'test',
                    maxResults: 1,
                    type: 'video'
                });
                
                log('âœ… YouTube API í˜¸ì¶œ ì„±ê³µ');
                log('ì‘ë‹µ ìƒíƒœ: ' + response.status);
                log('ê²°ê³¼ ê°œìˆ˜: ' + (response.result.items ? response.result.items.length : 0));
                
                updateStatus('YouTube API í…ŒìŠ¤íŠ¸ ì„±ê³µ!', 'success');
                
            } catch (error) {
                log('âŒ YouTube API í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ' + error.message);
                log('ì˜¤ë¥˜ ì„¸ë¶€ì‚¬í•­: ' + JSON.stringify(error, null, 2));
                updateStatus('YouTube API í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ' + error.message, 'error');
            }
        }
        
        function clearLog() {
            document.getElementById('log').textContent = '';
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ì‹¤í–‰
        window.addEventListener('load', () => {
            log('=== í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ ===');
            updateStatus('ì¤€ë¹„ ì™„ë£Œ. í…ŒìŠ¤íŠ¸ ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.', 'success');
        });
    </script>
</body>
</html>