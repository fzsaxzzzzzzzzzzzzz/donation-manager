<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deploy Keys ê¸°ë°˜ ë™ê¸°í™”</title>
    <style>
        body {
            font-family: 'Malgun Gothic', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f8f9fa;
        }
        
        .container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .step-card {
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            background: #f8f9fa;
        }
        
        .step-card.completed {
            border-color: #28a745;
            background: #d4edda;
        }
        
        .code-block {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 15px;
            font-family: monospace;
            font-size: 13px;
            margin: 10px 0;
            overflow-x: auto;
        }
        
        button {
            background: #007bff;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 10px 20px;
            cursor: pointer;
            margin: 5px;
        }
        
        button:hover {
            background: #0056b3;
        }
        
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
            color: #856404;
        }
        
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
            color: #155724;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”‘ Deploy Keys ê¸°ë°˜ ì•ˆì „í•œ ë™ê¸°í™”</h1>
        <p>ê°œì¸ í† í° ëŒ€ì‹  Deploy Keyë¥¼ ì‚¬ìš©í•œ ë” ì•ˆì „í•œ Git ë™ê¸°í™” ë°©ë²•</p>
        
        <!-- Deploy Keys ì¥ì  -->
        <div class="step-card">
            <h3>âœ¨ Deploy Keysì˜ ì¥ì </h3>
            <ul>
                <li><strong>ë³´ì•ˆì„±</strong>: íŠ¹ì • ì €ì¥ì†Œì—ë§Œ ì ‘ê·¼ ê¶Œí•œ</li>
                <li><strong>ê¶Œí•œ ì œí•œ</strong>: ì½ê¸° ì „ìš© ë˜ëŠ” ì“°ê¸° ê¶Œí•œ ì„ íƒ ê°€ëŠ¥</li>
                <li><strong>í† í° ë§Œë£Œ ì—†ìŒ</strong>: ê°œì¸ í† í°ê³¼ ë‹¬ë¦¬ ë§Œë£Œë˜ì§€ ì•ŠìŒ</li>
                <li><strong>ê°ì‚¬ ì¶”ì </strong>: í‚¤ë³„ë¡œ ì ‘ê·¼ ë¡œê·¸ ê´€ë¦¬</li>
                <li><strong>íŒ€ ê³µìœ </strong>: ê°œì¸ ê³„ì •ê³¼ ë…ë¦½ì </li>
            </ul>
        </div>
        
        <!-- ë‹¨ê³„ 1: SSH í‚¤ ìƒì„± -->
        <div class="step-card" id="step1">
            <h3>1ï¸âƒ£ SSH í‚¤ í˜ì–´ ìƒì„±</h3>
            <p>Deploy Keyìš© ì „ìš© SSH í‚¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</p>
            
            <div class="code-block">
                # SSH í‚¤ ìƒì„± (Windows)
                ssh-keygen -t ed25519 -C "donation-manager-deploy-key" -f donation-deploy-key
                
                # ë˜ëŠ” RSA í‚¤ (í˜¸í™˜ì„±ì´ ë” ì¢‹ìŒ)
                ssh-keygen -t rsa -b 4096 -C "donation-manager-deploy-key" -f donation-deploy-key
            </div>
            
            <button onclick="generateSSHKey()">SSH í‚¤ ìƒì„± ë„ì›€ë§</button>
            <button onclick="checkSSHKey()">ìƒì„±ëœ í‚¤ í™•ì¸</button>
        </div>
        
        <!-- ë‹¨ê³„ 2: GitHubì— Deploy Key ë“±ë¡ -->
        <div class="step-card" id="step2">
            <h3>2ï¸âƒ£ GitHubì— Deploy Key ë“±ë¡</h3>
            <p><code>donation-deploy-key.pub</code> ë‚´ìš©ì„ GitHubì— ë“±ë¡í•©ë‹ˆë‹¤.</p>
            
            <ol>
                <li>GitHub ì €ì¥ì†Œ â†’ Settings â†’ Deploy keys</li>
                <li>"Add deploy key" í´ë¦­</li>
                <li>Title: "Donation Manager Deploy Key"</li>
                <li>Key: <code>donation-deploy-key.pub</code> íŒŒì¼ ë‚´ìš© ë¶™ì—¬ë„£ê¸°</li>
                <li>"Allow write access" âœ… ì²´í¬ (ë™ê¸°í™”ìš©)</li>
            </ol>
            
            <button onclick="openGitHubDeployKeys()">GitHub Deploy Keys ì—´ê¸°</button>
            <button onclick="testDeployKey()">Deploy Key í…ŒìŠ¤íŠ¸</button>
        </div>
        
        <!-- ë‹¨ê³„ 3: SSH Agent ì„¤ì • -->
        <div class="step-card" id="step3">
            <h3>3ï¸âƒ£ SSH Agent ì„¤ì •</h3>
            <p>ìƒì„±í•œ í‚¤ë¥¼ SSH Agentì— ë“±ë¡í•©ë‹ˆë‹¤.</p>
            
            <div class="code-block">
                # SSH Agent ì‹œì‘ (Windows)
                eval $(ssh-agent -s)
                
                # í‚¤ ë“±ë¡
                ssh-add donation-deploy-key
                
                # ë“±ë¡ëœ í‚¤ í™•ì¸
                ssh-add -l
            </div>
            
            <button onclick="startSSHAgent()">SSH Agent ì‹œì‘</button>
            <button onclick="addSSHKey()">í‚¤ ë“±ë¡</button>
        </div>
        
        <!-- ë‹¨ê³„ 4: Git ì›ê²© ì €ì¥ì†Œ ì„¤ì • -->
        <div class="step-card" id="step4">
            <h3>4ï¸âƒ£ Git ì›ê²© ì €ì¥ì†Œ SSH ì„¤ì •</h3>
            <p>HTTPS ëŒ€ì‹  SSHë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì›ê²© ì €ì¥ì†Œë¥¼ ë³€ê²½í•©ë‹ˆë‹¤.</p>
            
            <div class="code-block">
                # í˜„ì¬ ì›ê²© ì €ì¥ì†Œ í™•ì¸
                git remote -v
                
                # SSHë¡œ ë³€ê²½
                git remote set-url origin git@github.com:fzsaxzzzzzzzzzzzzz/donation-manager.git
                
                # ë³€ê²½ í™•ì¸
                git remote -v
            </div>
            
            <button onclick="checkCurrentRemote()">í˜„ì¬ ì›ê²© ì €ì¥ì†Œ í™•ì¸</button>
            <button onclick="changeToSSH()">SSHë¡œ ë³€ê²½</button>
        </div>
        
        <!-- ë‹¨ê³„ 5: Deploy Key ë™ê¸°í™” í…ŒìŠ¤íŠ¸ -->
        <div class="step-card" id="step5">
            <h3>5ï¸âƒ£ Deploy Key ë™ê¸°í™” í…ŒìŠ¤íŠ¸</h3>
            <p>Deploy Keyë¥¼ ì‚¬ìš©í•œ ë™ê¸°í™”ê°€ ì •ìƒ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.</p>
            
            <div class="warning">
                <strong>ì£¼ì˜:</strong> Deploy Key ì‚¬ìš© ì‹œ GitHub API í† í°ì´ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
                Git ëª…ë ¹ì–´ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ì—¬ ë” ì•ˆì „í•˜ê³  ë¹ ë¥¸ ë™ê¸°í™”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
            </div>
            
            <button onclick="testSSHConnection()">SSH ì—°ê²° í…ŒìŠ¤íŠ¸</button>
            <button onclick="testGitPush()">Git Push í…ŒìŠ¤íŠ¸</button>
            <button onclick="syncWithDeployKey()">Deploy Key ë™ê¸°í™”</button>
        </div>
        
        <!-- ìë™í™” ìŠ¤í¬ë¦½íŠ¸ -->
        <div class="step-card">
            <h3>ğŸ¤– ìë™í™” ìŠ¤í¬ë¦½íŠ¸</h3>
            <p>Deploy Key ê¸°ë°˜ ë™ê¸°í™” ìë™í™”ë¥¼ ìœ„í•œ ìŠ¤í¬ë¦½íŠ¸</p>
            
            <div class="code-block">
                # sync-with-deploy-key.bat
                @echo off
                echo Deploy Key ê¸°ë°˜ ë™ê¸°í™” ì‹œì‘...
                
                # ë³€ê²½ì‚¬í•­ í™•ì¸
                git status
                
                # ìŠ¤í…Œì´ì§•
                git add data.json
                
                # ì»¤ë°‹
                git commit -m "ìë™ ë™ê¸°í™”: Deploy Keyë¥¼ í†µí•œ ë°ì´í„° ì—…ë°ì´íŠ¸"
                
                # í‘¸ì‹œ (Deploy Key ì‚¬ìš©)
                git push origin main
                
                echo ë™ê¸°í™” ì™„ë£Œ!
                pause
            </div>
            
            <button onclick="createSyncScript()">ë™ê¸°í™” ìŠ¤í¬ë¦½íŠ¸ ìƒì„±</button>
            <button onclick="runSyncScript()">ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰</button>
        </div>
    </div>

    <script>
        // SSH í‚¤ ìƒì„± ë„ì›€ë§
        function generateSSHKey() {
            const instructions = `
SSH í‚¤ ìƒì„± ë‹¨ê³„:

1. í„°ë¯¸ë„ ë˜ëŠ” Git Bashë¥¼ ê´€ë¦¬ì ê¶Œí•œìœ¼ë¡œ ì‹¤í–‰
2. ë‹¤ìŒ ëª…ë ¹ì–´ ì‹¤í–‰:
   ssh-keygen -t ed25519 -C "donation-manager-deploy" -f donation-deploy-key
   
3. íŒ¨ìŠ¤í”„ë ˆì´ì¦ˆ ì„¤ì • (ì„ íƒì‚¬í•­, ë³´ì•ˆ ê°•í™”)
4. ìƒì„±ëœ íŒŒì¼ í™•ì¸:
   - donation-deploy-key (ê°œì¸í‚¤ - ì ˆëŒ€ ê³µìœ  ê¸ˆì§€)
   - donation-deploy-key.pub (ê³µê°œí‚¤ - GitHubì— ë“±ë¡)

íŒŒì¼ ìœ„ì¹˜: ${process.cwd() || 'í˜„ì¬ ë””ë ‰í† ë¦¬'}
            `;
            
            alert(instructions);
            markStepCompleted('step1');
        }
        
        // SSH í‚¤ í™•ì¸
        function checkSSHKey() {
            const checkCommands = `
ìƒì„±ëœ SSH í‚¤ í™•ì¸ ëª…ë ¹ì–´:

# ê³µê°œí‚¤ ë‚´ìš© ë³´ê¸° (GitHubì— ë“±ë¡í•  ë‚´ìš©)
cat donation-deploy-key.pub

# ê°œì¸í‚¤ ê¶Œí•œ í™•ì¸
ls -la donation-deploy-key

# SSH í‚¤ ì§€ë¬¸ í™•ì¸
ssh-keygen -lf donation-deploy-key.pub
            `;
            
            alert(checkCommands);
        }
        
        // GitHub Deploy Keys í˜ì´ì§€ ì—´ê¸°
        function openGitHubDeployKeys() {
            const url = 'https://github.com/fzsaxzzzzzzzzzzzzz/donation-manager/settings/keys';
            window.open(url, '_blank');
            
            setTimeout(() => {
                const instructions = `
Deploy Key ë“±ë¡ ë‹¨ê³„:

1. "Add deploy key" ë²„íŠ¼ í´ë¦­
2. Title: "Donation Manager Deploy Key"
3. Key í•„ë“œì— donation-deploy-key.pub íŒŒì¼ ë‚´ìš© ë¶™ì—¬ë„£ê¸°
4. "Allow write access" ì²´í¬ë°•ìŠ¤ ì„ íƒ
5. "Add key" ë²„íŠ¼ í´ë¦­

ë“±ë¡ ì™„ë£Œ í›„ "Deploy Key í…ŒìŠ¤íŠ¸" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.
                `;
                alert(instructions);
            }, 2000);
        }
        
        // Deploy Key í…ŒìŠ¤íŠ¸
        function testDeployKey() {
            const testCommand = `
Deploy Key í…ŒìŠ¤íŠ¸ ëª…ë ¹ì–´:

# SSH ì—°ê²° í…ŒìŠ¤íŠ¸
ssh -T git@github.com

ì„±ê³µ ë©”ì‹œì§€: "Hi username! You've successfully authenticated, but GitHub does not provide shell access."

ì—°ê²°ì´ ì„±ê³µí•˜ë©´ Deploy Keyê°€ ì •ìƒ ë“±ë¡ëœ ê²ƒì…ë‹ˆë‹¤.
            `;
            
            alert(testCommand);
            markStepCompleted('step2');
        }
        
        // SSH Agent ì‹œì‘
        function startSSHAgent() {
            const agentCommands = `
SSH Agent ì‹œì‘ ëª…ë ¹ì–´:

Windows (Git Bash):
eval $(ssh-agent -s)

Windows (PowerShell):
Start-Service ssh-agent
            `;
            
            alert(agentCommands);
        }
        
        // SSH í‚¤ ë“±ë¡
        function addSSHKey() {
            const addCommands = `
SSH í‚¤ë¥¼ Agentì— ë“±ë¡:

# í‚¤ ë“±ë¡
ssh-add donation-deploy-key

# íŒ¨ìŠ¤í”„ë ˆì´ì¦ˆ ì…ë ¥ (ì„¤ì •í•œ ê²½ìš°)

# ë“±ë¡ í™•ì¸
ssh-add -l

ë“±ë¡ëœ í‚¤ ëª©ë¡ì´ í‘œì‹œë˜ë©´ ì„±ê³µì…ë‹ˆë‹¤.
            `;
            
            alert(addCommands);
            markStepCompleted('step3');
        }
        
        // í˜„ì¬ ì›ê²© ì €ì¥ì†Œ í™•ì¸
        function checkCurrentRemote() {
            const checkCommand = `
í˜„ì¬ Git ì›ê²© ì €ì¥ì†Œ í™•ì¸:

git remote -v

í˜„ì¬ HTTPSë¥¼ ì‚¬ìš©ì¤‘ì¸ ê²½ìš°:
origin  https://github.com/fzsaxzzzzzzzzzzzzz/donation-manager.git (fetch)
origin  https://github.com/fzsaxzzzzzzzzzzzzz/donation-manager.git (push)

SSHë¡œ ë³€ê²½ í•„ìš”: "SSHë¡œ ë³€ê²½" ë²„íŠ¼ í´ë¦­
            `;
            
            alert(checkCommand);
        }
        
        // SSHë¡œ ë³€ê²½
        function changeToSSH() {
            const changeCommand = `
ì›ê²© ì €ì¥ì†Œë¥¼ SSHë¡œ ë³€ê²½:

git remote set-url origin git@github.com:fzsaxzzzzzzzzzzzzz/donation-manager.git

ë³€ê²½ í™•ì¸:
git remote -v

SSH í˜•íƒœë¡œ ë³€ê²½ë˜ì—ˆë‹¤ë©´:
origin  git@github.com:fzsaxzzzzzzzzzzzzz/donation-manager.git (fetch)
origin  git@github.com:fzsaxzzzzzzzzzzzzz/donation-manager.git (push)
            `;
            
            alert(changeCommand);
            markStepCompleted('step4');
        }
        
        // SSH ì—°ê²° í…ŒìŠ¤íŠ¸
        function testSSHConnection() {
            const testCommand = `
SSH ì—°ê²° í…ŒìŠ¤íŠ¸:

ssh -T git@github.com

ì„±ê³µ ë©”ì‹œì§€ê°€ ë‚˜íƒ€ë‚˜ë©´ ì—°ê²° ì„±ê³µì…ë‹ˆë‹¤.
            `;
            
            alert(testCommand);
        }
        
        // Git Push í…ŒìŠ¤íŠ¸
        function testGitPush() {
            const pushTest = `
Git Push í…ŒìŠ¤íŠ¸:

# í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„±
echo "Deploy Key í…ŒìŠ¤íŠ¸" > deploy-key-test.txt

# ìŠ¤í…Œì´ì§•
git add deploy-key-test.txt

# ì»¤ë°‹
git commit -m "Deploy Key í…ŒìŠ¤íŠ¸ ì»¤ë°‹"

# í‘¸ì‹œ (Deploy Key ì‚¬ìš©)
git push origin main

# í…ŒìŠ¤íŠ¸ íŒŒì¼ ì‚­ì œ
git rm deploy-key-test.txt
git commit -m "í…ŒìŠ¤íŠ¸ íŒŒì¼ ì‚­ì œ"
git push origin main

í‘¸ì‹œê°€ ì„±ê³µí•˜ë©´ Deploy Key ì„¤ì •ì´ ì™„ë£Œëœ ê²ƒì…ë‹ˆë‹¤!
            `;
            
            alert(pushTest);
        }
        
        // Deploy Key ë™ê¸°í™”
        async function syncWithDeployKey() {
            const syncInstructions = `
Deploy Key ê¸°ë°˜ ë™ê¸°í™” ë°©ë²•:

1. ë” ì´ìƒ GitHub API í† í°ì´ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤
2. Git ëª…ë ¹ì–´ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ì—¬ ë™ê¸°í™”
3. SSH í‚¤ ê¸°ë°˜ìœ¼ë¡œ ë” ì•ˆì „í•œ ì¸ì¦
4. ìë™í™” ìŠ¤í¬ë¦½íŠ¸ë¡œ í¸ë¦¬í•œ ë™ê¸°í™”

ë™ê¸°í™” ëª…ë ¹ì–´:
git add data.json
git commit -m "Deploy Key ë™ê¸°í™”: í›„ì› ë°ì´í„° ì—…ë°ì´íŠ¸"
git push origin main

ì´ì œ GitHub APIì˜ 409 ì—ëŸ¬ë‚˜ í† í° ë§Œë£Œ ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤!
            `;
            
            alert(syncInstructions);
            markStepCompleted('step5');
            
            // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
            showSuccessMessage();
        }
        
        // ë™ê¸°í™” ìŠ¤í¬ë¦½íŠ¸ ìƒì„±
        function createSyncScript() {
            const script = `@echo off
title Deploy Key ìë™ ë™ê¸°í™”
echo ========================================
echo     Deploy Key ê¸°ë°˜ ìë™ ë™ê¸°í™”
echo ========================================
echo.

echo 1. Git ìƒíƒœ í™•ì¸ ì¤‘...
git status

echo.
echo 2. data.json ìŠ¤í…Œì´ì§•...
git add data.json

echo.
echo 3. ì»¤ë°‹ ìƒì„± ì¤‘...
git commit -m "ìë™ ë™ê¸°í™”: Deploy Keyë¥¼ í†µí•œ ë°ì´í„° ì—…ë°ì´íŠ¸ - %date% %time%"

echo.
echo 4. GitHubë¡œ í‘¸ì‹œ ì¤‘...
git push origin main

echo.
echo âœ… ë™ê¸°í™” ì™„ë£Œ!
echo GitHub Pagesì—ì„œ ìë™ìœ¼ë¡œ ì˜¤ë²„ë ˆì´ê°€ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.
echo.
pause`;
            
            // ìŠ¤í¬ë¦½íŠ¸ ë‹¤ìš´ë¡œë“œ
            const blob = new Blob([script], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'sync-with-deploy-key.bat';
            a.click();
            URL.revokeObjectURL(url);
            
            alert('ë™ê¸°í™” ìŠ¤í¬ë¦½íŠ¸ê°€ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!\n\níŒŒì¼: sync-with-deploy-key.bat\nì‚¬ìš©ë²•: ë”ë¸”í´ë¦­ìœ¼ë¡œ ì‹¤í–‰');
        }
        
        // ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
        function runSyncScript() {
            alert('sync-with-deploy-key.bat íŒŒì¼ì„ ë”ë¸”í´ë¦­í•˜ì—¬ ì‹¤í–‰í•˜ì„¸ìš”.\n\nìŠ¤í¬ë¦½íŠ¸ê°€ ì—†ë‹¤ë©´ "ë™ê¸°í™” ìŠ¤í¬ë¦½íŠ¸ ìƒì„±" ë²„íŠ¼ì„ ë¨¼ì € í´ë¦­í•˜ì„¸ìš”.');
        }
        
        // ë‹¨ê³„ ì™„ë£Œ í‘œì‹œ
        function markStepCompleted(stepId) {
            const stepCard = document.getElementById(stepId);
            if (stepCard) {
                stepCard.classList.add('completed');
            }
        }
        
        // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
        function showSuccessMessage() {
            const successDiv = document.createElement('div');
            successDiv.className = 'success';
            successDiv.innerHTML = `
                <h4>ğŸ‰ Deploy Key ì„¤ì • ì™„ë£Œ!</h4>
                <p><strong>ì´ì œ ë‹¤ìŒê³¼ ê°™ì€ ì¥ì ì„ ì–»ì—ˆìŠµë‹ˆë‹¤:</strong></p>
                <ul>
                    <li>âœ… GitHub API í† í° ë¶ˆí•„ìš”</li>
                    <li>âœ… 409 ì¶©ëŒ ì—ëŸ¬ ì—†ìŒ</li>
                    <li>âœ… í† í° ë§Œë£Œ ê±±ì • ì—†ìŒ</li>
                    <li>âœ… ë” ë¹ ë¥¸ Git ë™ê¸°í™”</li>
                    <li>âœ… í–¥ìƒëœ ë³´ì•ˆì„±</li>
                </ul>
                <p>ì•ìœ¼ë¡œëŠ” <code>sync-with-deploy-key.bat</code> ìŠ¤í¬ë¦½íŠ¸ë§Œ ì‹¤í–‰í•˜ë©´ ìë™ìœ¼ë¡œ ë™ê¸°í™”ë©ë‹ˆë‹¤!</p>
            `;
            
            document.querySelector('.container').appendChild(successDiv);
        }
        
        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', () => {
            console.log('Deploy Keys ì„¤ì • ê°€ì´ë“œ ë¡œë“œë¨');
        });
    </script>
</body>
</html>