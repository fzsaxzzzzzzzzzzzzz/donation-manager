<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>후원 관리 시스템</title>
<style>
body { 
    font-family: Arial, sans-serif; 
    margin: 0; 
    padding: 20px; 
    background: #f0f2f5; 
}

.container { 
    max-width: 1200px; 
    margin: 0 auto; 
    background: white; 
    padding: 30px; 
    border-radius: 12px; 
    box-shadow: 0 4px 20px rgba(0,0,0,0.1); 
}

h1 { 
    text-align: center; 
    color: #1877f2; 
    margin-bottom: 40px; 
    font-size: 32px; 
}

.section { 
    margin-bottom: 40px; 
    padding: 25px; 
    border: 3px solid #1877f2; 
    border-radius: 12px; 
    background: linear-gradient(135deg, #f8f9ff 0%, #e3f2fd 100%); 
}

.section h2 { 
    margin: 0 0 25px 0; 
    color: #1877f2; 
    font-size: 24px; 
    text-align: center; 
}

.quick-form { 
    display: grid; 
    grid-template-columns: 2fr 2fr 1fr 1fr auto; 
    gap: 15px; 
    align-items: end; 
}

.form-group { 
    margin-bottom: 20px; 
}

.form-group label { 
    display: block; 
    margin-bottom: 8px; 
    font-weight: bold; 
    color: #333; 
    font-size: 16px; 
}

.form-input { 
    width: 100%; 
    padding: 12px; 
    border: 2px solid #ddd; 
    border-radius: 8px; 
    font-size: 16px; 
    box-sizing: border-box; 
}

.form-input:focus { 
    border-color: #1877f2; 
    outline: none; 
    box-shadow: 0 0 8px rgba(24,119,242,0.3); 
}

.btn { 
    padding: 12px 25px; 
    background: #1877f2; 
    color: white; 
    border: none; 
    border-radius: 8px; 
    cursor: pointer; 
    font-size: 16px; 
    font-weight: bold; 
    transition: background 0.3s; 
}

.btn:hover { 
    background: #166fe5; 
}

.btn-success { 
    background: #28a745; 
}

.btn-success:hover { 
    background: #218838; 
}

.btn-danger { 
    background: #dc3545; 
}

.btn-danger:hover { 
    background: #c82333; 
}

.streamer-grid { 
    display: grid; 
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); 
    gap: 20px; 
}

.streamer-item label { 
    display: block; 
    margin-bottom: 8px; 
    font-weight: bold; 
    color: #1877f2; 
    font-size: 16px; 
}

.radio-group { 
    display: flex; 
    gap: 30px; 
    align-items: center; 
}

.radio-group label { 
    display: flex; 
    align-items: center; 
    gap: 8px; 
    font-size: 16px; 
    cursor: pointer; 
}

.status { 
    padding: 15px; 
    border-radius: 8px; 
    margin: 20px 0; 
    font-weight: bold; 
    font-size: 16px; 
    text-align: center; 
}

.status-success { 
    background: #d4edda; 
    color: #155724; 
    border: 2px solid #c3e6cb; 
}

.status-error { 
    background: #f8d7da; 
    color: #721c24; 
    border: 2px solid #f5c6cb; 
}

.table { 
    width: 100%; 
    border-collapse: collapse; 
    margin-top: 20px; 
    font-size: 16px; 
}

.table th, .table td { 
    border: 2px solid #ddd; 
    padding: 12px; 
    text-align: center; 
}

.table th { 
    background: #1877f2; 
    color: white; 
    font-weight: bold; 
}

.table tr:nth-child(even) { 
    background: #f8f9fa; 
}

.editable { 
    cursor: pointer; 
    transition: background 0.2s; 
}

.editable:hover { 
    background: #e3f2fd !important; 
}
</style>
</head>
<body>

<div class="container">
    <h1>🎯 후원 관리 시스템</h1>
    
    <!-- 빠른 후원 등록 -->
    <div class="section">
        <h2>⚡ 빠른 후원 등록</h2>
        <div class="quick-form">
            <div>
                <label>후원자명</label>
                <input type="text" id="quick-donor" class="form-input" placeholder="후원자명 입력">
            </div>
            <div>
                <label>스트리머</label>
                <select id="quick-streamer" class="form-input">
                    <option value="엄삼용">🫅 엄삼용</option>
                    <option value="손덕배">🌺 손덕배</option>
                    <option value="연기">🐧 연기</option>
                    <option value="주옥">👺 주옥</option>
                    <option value="불곰">🎬 불곰</option>
                    <option value="이효팔">🏝 이효팔</option>
                    <option value="동동">😎 동동</option>
                    <option value="남붕">🤠 남붕</option>
                    <option value="옥긔">🦆 옥긔</option>
                    <option value="국고">🏦 국고</option>
                </select>
            </div>
            <div>
                <label>금액(만원)</label>
                <input type="text" id="quick-amount" class="form-input" placeholder="0" inputmode="numeric">
            </div>
            <div>
                <label>타입</label>
                <select id="quick-type" class="form-input">
                    <option value="계좌">💳 계좌</option>
                    <option value="투네">🎯 투네</option>
                    <option value="슈퍼챗">💬 슈퍼챗</option>
                </select>
            </div>
            <div>
                <button onclick="quickAdd()" class="btn">➕ 등록</button>
            </div>
        </div>
    </div>

    <!-- 일괄 후원 등록 -->
    <div class="section">
        <h2>📊 일괄 후원 등록</h2>
        <div class="form-group">
            <label>후원자명</label>
            <input type="text" id="batch-donor" class="form-input" placeholder="후원자명 입력">
        </div>
        <div class="form-group">
            <label>후원 타입</label>
            <div class="radio-group">
                <label><input type="radio" name="batch-type" value="계좌" checked> 💳 계좌</label>
                <label><input type="radio" name="batch-type" value="투네"> 🎯 투네</label>
                <label><input type="radio" name="batch-type" value="슈퍼챗"> 💬 슈퍼챗</label>
            </div>
        </div>
        <div class="form-group">
            <label>스트리머별 금액(만원)</label>
            <div class="streamer-grid">
                <div class="streamer-item">
                    <label>🫅 엄삼용</label>
                    <input type="text" data-streamer="엄삼용" class="form-input streamer-amount" placeholder="0" inputmode="numeric">
                </div>
                <div class="streamer-item">
                    <label>🌺 손덕배</label>
                    <input type="text" data-streamer="손덕배" class="form-input streamer-amount" placeholder="0" inputmode="numeric">
                </div>
                <div class="streamer-item">
                    <label>🐧 연기</label>
                    <input type="text" data-streamer="연기" class="form-input streamer-amount" placeholder="0" inputmode="numeric">
                </div>
                <div class="streamer-item">
                    <label>👺 주옥</label>
                    <input type="text" data-streamer="주옥" class="form-input streamer-amount" placeholder="0" inputmode="numeric">
                </div>
                <div class="streamer-item">
                    <label>🎬 불곰</label>
                    <input type="text" data-streamer="불곰" class="form-input streamer-amount" placeholder="0" inputmode="numeric">
                </div>
                <div class="streamer-item">
                    <label>🏝 이효팔</label>
                    <input type="text" data-streamer="이효팔" class="form-input streamer-amount" placeholder="0" inputmode="numeric">
                </div>
                <div class="streamer-item">
                    <label>😎 동동</label>
                    <input type="text" data-streamer="동동" class="form-input streamer-amount" placeholder="0" inputmode="numeric">
                </div>
                <div class="streamer-item">
                    <label>🤠 남붕</label>
                    <input type="text" data-streamer="남붕" class="form-input streamer-amount" placeholder="0" inputmode="numeric">
                </div>
                <div class="streamer-item">
                    <label>🦆 옥긔</label>
                    <input type="text" data-streamer="옥긔" class="form-input streamer-amount" placeholder="0" inputmode="numeric">
                </div>
                <div class="streamer-item">
                    <label>🏦 국고</label>
                    <input type="text" data-streamer="국고" class="form-input streamer-amount" placeholder="0" inputmode="numeric">
                </div>
            </div>
        </div>
        <button onclick="batchAdd()" class="btn btn-success" style="width: 100%; padding: 20px; font-size: 18px;">✨ 일괄 등록</button>
    </div>

    <!-- 상태 메시지 -->
    <div id="status-message"></div>

    <!-- 후원 내역 테이블 -->
    <div class="section">
        <h2>📋 후원 내역</h2>
        <div style="margin-bottom: 20px;">
            <button onclick="loadData()" class="btn">🔄 새로고침</button>
            <button onclick="clearAll()" class="btn btn-danger" style="margin-left: 10px;">🗑️ 전체삭제</button>
        </div>
        <table class="table">
            <thead>
                <tr>
                    <th>번호</th>
                    <th>후원자</th>
                    <th>스트리머</th>
                    <th>타입</th>
                    <th>금액(만)</th>
                    <th>시간</th>
                    <th>삭제</th>
                </tr>
            </thead>
            <tbody id="donation-table">
                <tr>
                    <td colspan="7" style="padding: 40px; color: #666; font-size: 18px;">후원 내역이 없습니다.</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<script>
// 전역 변수
let donations = JSON.parse(localStorage.getItem('donations') || '[]');

// 상태 메시지 표시
function showStatus(message, type = 'info') {
    const statusEl = document.getElementById('status-message');
    statusEl.className = `status status-${type}`;
    statusEl.textContent = message;
    setTimeout(() => statusEl.textContent = '', 4000);
}

// 로컬 저장
function saveDonations() {
    localStorage.setItem('donations', JSON.stringify(donations));
}

// 숫자만 입력 허용
function onlyNumbers(event) {
    const char = String.fromCharCode(event.which);
    if (!/[0-9.]/.test(char)) {
        event.preventDefault();
    }
}

// 빠른 등록
function quickAdd() {
    const donor = document.getElementById('quick-donor').value.trim();
    const streamer = document.getElementById('quick-streamer').value;
    const amount = parseFloat(document.getElementById('quick-amount').value);
    const type = document.getElementById('quick-type').value;

    if (!donor) {
        showStatus('후원자명을 입력하세요.', 'error');
        return;
    }
    if (!amount || amount <= 0) {
        showStatus('올바른 금액을 입력하세요.', 'error');
        return;
    }

    const donation = {
        id: Date.now(),
        donor: donor,
        streamer: streamer,
        type: type,
        amount: amount,
        time: new Date()
    };

    donations.unshift(donation);
    saveDonations();
    document.getElementById('quick-donor').value = '';
    document.getElementById('quick-amount').value = '';
    updateTable();
    showStatus(`${donor}님 → ${streamer} ${amount}만원 등록완료!`, 'success');
}

// 일괄 등록
function batchAdd() {
    const donor = document.getElementById('batch-donor').value.trim();
    const type = document.querySelector('input[name="batch-type"]:checked').value;

    if (!donor) {
        showStatus('후원자명을 입력하세요.', 'error');
        return;
    }

    const streamerInputs = document.querySelectorAll('.streamer-amount');
    const newDonations = [];

    streamerInputs.forEach(input => {
        const amount = parseFloat(input.value.trim());
        if (!isNaN(amount) && amount > 0) {
            const streamer = input.dataset.streamer;
            newDonations.push({
                id: Date.now() + Math.random(),
                donor: donor,
                streamer: streamer,
                type: type,
                amount: amount,
                time: new Date()
            });
        }
    });

    if (newDonations.length === 0) {
        showStatus('최소 하나의 스트리머에게 금액을 입력하세요.', 'error');
        return;
    }

    donations.unshift(...newDonations);
    saveDonations();
    document.getElementById('batch-donor').value = '';
    streamerInputs.forEach(input => input.value = '');
    updateTable();
    showStatus(`${newDonations.length}개 후원이 등록되었습니다!`, 'success');
}

// 테이블 업데이트
function updateTable() {
    const tbody = document.getElementById('donation-table');
    
    if (donations.length === 0) {
        tbody.innerHTML = '<tr><td colspan="7" style="padding: 40px; color: #666; font-size: 18px;">후원 내역이 없습니다.</td></tr>';
        return;
    }

    tbody.innerHTML = donations.map((d, index) => `
        <tr>
            <td>${index + 1}</td>
            <td class="editable" onclick="editCell(${index}, 'donor')">${d.donor}</td>
            <td class="editable" onclick="editCell(${index}, 'streamer')">${d.streamer}</td>
            <td class="editable" onclick="editCell(${index}, 'type')">${d.type}</td>
            <td class="editable" onclick="editCell(${index}, 'amount')">${d.amount}</td>
            <td>${new Date(d.time).toLocaleString('ko-KR')}</td>
            <td><button onclick="deleteDonation(${index})" class="btn btn-danger" style="padding: 8px 12px;">삭제</button></td>
        </tr>
    `).join('');
}

// 셀 편집
function editCell(index, field) {
    const currentValue = donations[index][field];
    let newValue;
    
    if (field === 'streamer') {
        const streamers = ['엄삼용', '손덕배', '연기', '주옥', '불곰', '이효팔', '동동', '남붕', '옥긔', '국고'];
        newValue = prompt(`스트리머 선택:\n${streamers.join(', ')}`, currentValue);
    } else if (field === 'type') {
        const types = ['계좌', '투네', '슈퍼챗'];
        newValue = prompt(`타입 선택:\n${types.join(', ')}`, currentValue);
    } else {
        newValue = prompt(`${field} 수정:`, currentValue);
    }
    
    if (newValue !== null && newValue.trim() !== '') {
        if (field === 'amount') {
            const amount = parseFloat(newValue);
            if (isNaN(amount) || amount <= 0) {
                showStatus('올바른 금액을 입력하세요.', 'error');
                return;
            }
            donations[index][field] = amount;
        } else {
            donations[index][field] = newValue.trim();
        }
        saveDonations();
        updateTable();
        showStatus('수정이 완료되었습니다.', 'success');
    }
}

// 후원 삭제
function deleteDonation(index) {
    if (confirm('이 후원을 삭제하시겠습니까?')) {
        donations.splice(index, 1);
        saveDonations();
        updateTable();
        showStatus('후원이 삭제되었습니다.', 'success');
    }
}

// 전체 삭제
function clearAll() {
    if (confirm('모든 후원 내역을 삭제하시겠습니까?')) {
        donations = [];
        saveDonations();
        updateTable();
        showStatus('모든 후원 내역이 삭제되었습니다.', 'success');
    }
}

// 데이터 로드
function loadData() {
    donations = JSON.parse(localStorage.getItem('donations') || '[]');
    updateTable();
    showStatus('데이터를 새로고침했습니다.', 'success');
}

// 초기화
document.addEventListener('DOMContentLoaded', function() {
    updateTable();
    
    // 숫자 입력 필드 설정
    const numericInputs = document.querySelectorAll('input[inputmode="numeric"]');
    numericInputs.forEach(input => {
        input.addEventListener('keypress', onlyNumbers);
    });
    
    console.log('후원 관리 시스템이 시작되었습니다.');
});
</script>

</body>
</html>