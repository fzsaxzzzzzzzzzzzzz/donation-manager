<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>í›„ì› ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
<style>
body { 
    font-family: Arial, sans-serif; 
    margin: 0; 
    padding: 20px; 
    background: #f0f2f5; 
}

.container { 
    max-width: 1200px; 
    margin: 0 auto; 
    background: white; 
    padding: 30px; 
    border-radius: 12px; 
    box-shadow: 0 4px 20px rgba(0,0,0,0.1); 
}

h1 { 
    text-align: center; 
    color: #1877f2; 
    margin-bottom: 40px; 
    font-size: 32px; 
}

.section { 
    margin-bottom: 40px; 
    padding: 25px; 
    border: 3px solid #1877f2; 
    border-radius: 12px; 
    background: linear-gradient(135deg, #f8f9ff 0%, #e3f2fd 100%); 
}

.section h2 { 
    margin: 0 0 25px 0; 
    color: #1877f2; 
    font-size: 24px; 
    text-align: center; 
}

.quick-form { 
    display: grid; 
    grid-template-columns: 2fr 2fr 1fr 1fr auto; 
    gap: 15px; 
    align-items: end; 
}

.form-group { 
    margin-bottom: 20px; 
}

.form-group label { 
    display: block; 
    margin-bottom: 8px; 
    font-weight: bold; 
    color: #333; 
    font-size: 16px; 
}

.form-input { 
    width: 100%; 
    padding: 12px; 
    border: 2px solid #ddd; 
    border-radius: 8px; 
    font-size: 16px; 
    box-sizing: border-box; 
}

.form-input:focus { 
    border-color: #1877f2; 
    outline: none; 
    box-shadow: 0 0 8px rgba(24,119,242,0.3); 
}

.btn { 
    padding: 12px 25px; 
    background: #1877f2; 
    color: white; 
    border: none; 
    border-radius: 8px; 
    cursor: pointer; 
    font-size: 16px; 
    font-weight: bold; 
    transition: background 0.3s; 
}

.btn:hover { 
    background: #166fe5; 
}

.btn-success { 
    background: #28a745; 
}

.btn-success:hover { 
    background: #218838; 
}

.btn-danger { 
    background: #dc3545; 
}

.btn-danger:hover { 
    background: #c82333; 
}

.streamer-grid { 
    display: grid; 
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); 
    gap: 20px; 
}

.streamer-item label { 
    display: block; 
    margin-bottom: 8px; 
    font-weight: bold; 
    color: #1877f2; 
    font-size: 16px; 
}

.radio-group { 
    display: flex; 
    gap: 30px; 
    align-items: center; 
}

.radio-group label { 
    display: flex; 
    align-items: center; 
    gap: 8px; 
    font-size: 16px; 
    cursor: pointer; 
}

.status { 
    padding: 15px; 
    border-radius: 8px; 
    margin: 20px 0; 
    font-weight: bold; 
    font-size: 16px; 
    text-align: center; 
}

.status-success { 
    background: #d4edda; 
    color: #155724; 
    border: 2px solid #c3e6cb; 
}

.status-error { 
    background: #f8d7da; 
    color: #721c24; 
    border: 2px solid #f5c6cb; 
}

.table { 
    width: 100%; 
    border-collapse: collapse; 
    margin-top: 20px; 
    font-size: 16px; 
}

.table th, .table td { 
    border: 2px solid #ddd; 
    padding: 12px; 
    text-align: center; 
}

.table th { 
    background: #1877f2; 
    color: white; 
    font-weight: bold; 
}

.table tr:nth-child(even) { 
    background: #f8f9fa; 
}

.editable { 
    cursor: pointer; 
    transition: background 0.2s; 
}

.editable:hover { 
    background: #e3f2fd !important; 
}
</style>
</head>
<body>

<div class="container">
    <h1>ğŸ¯ í›„ì› ê´€ë¦¬ ì‹œìŠ¤í…œ</h1>
    
    <!-- ë¹ ë¥¸ í›„ì› ë“±ë¡ -->
    <div class="section">
        <h2>âš¡ ë¹ ë¥¸ í›„ì› ë“±ë¡</h2>
        <div class="quick-form">
            <div>
                <label>í›„ì›ìëª…</label>
                <input type="text" id="quick-donor" class="form-input" placeholder="í›„ì›ìëª… ì…ë ¥">
            </div>
            <div>
                <label>ìŠ¤íŠ¸ë¦¬ë¨¸</label>
                <select id="quick-streamer" class="form-input">
                    <option value="ì—„ì‚¼ìš©">ğŸ«… ì—„ì‚¼ìš©</option>
                    <option value="ì†ë•ë°°">ğŸŒº ì†ë•ë°°</option>
                    <option value="ì—°ê¸°">ğŸ§ ì—°ê¸°</option>
                    <option value="ì£¼ì˜¥">ğŸ‘º ì£¼ì˜¥</option>
                    <option value="ë¶ˆê³°">ğŸ¬ ë¶ˆê³°</option>
                    <option value="ì´íš¨íŒ”">ğŸ ì´íš¨íŒ”</option>
                    <option value="ë™ë™">ğŸ˜ ë™ë™</option>
                    <option value="ë‚¨ë¶•">ğŸ¤  ë‚¨ë¶•</option>
                    <option value="ì˜¥ê¸”">ğŸ¦† ì˜¥ê¸”</option>
                    <option value="êµ­ê³ ">ğŸ¦ êµ­ê³ </option>
                </select>
            </div>
            <div>
                <label>ê¸ˆì•¡(ë§Œì›)</label>
                <input type="text" id="quick-amount" class="form-input" placeholder="0" inputmode="numeric">
            </div>
            <div>
                <label>íƒ€ì…</label>
                <select id="quick-type" class="form-input">
                    <option value="ê³„ì¢Œ">ğŸ’³ ê³„ì¢Œ</option>
                    <option value="íˆ¬ë„¤">ğŸ¯ íˆ¬ë„¤</option>
                    <option value="ìŠˆí¼ì±—">ğŸ’¬ ìŠˆí¼ì±—</option>
                </select>
            </div>
            <div>
                <button onclick="quickAdd()" class="btn">â• ë“±ë¡</button>
            </div>
        </div>
    </div>

    <!-- ì¼ê´„ í›„ì› ë“±ë¡ -->
    <div class="section">
        <h2>ğŸ“Š ì¼ê´„ í›„ì› ë“±ë¡</h2>
        <div class="form-group">
            <label>í›„ì›ìëª…</label>
            <input type="text" id="batch-donor" class="form-input" placeholder="í›„ì›ìëª… ì…ë ¥">
        </div>
        <div class="form-group">
            <label>í›„ì› íƒ€ì…</label>
            <div class="radio-group">
                <label><input type="radio" name="batch-type" value="ê³„ì¢Œ" checked> ğŸ’³ ê³„ì¢Œ</label>
                <label><input type="radio" name="batch-type" value="íˆ¬ë„¤"> ğŸ¯ íˆ¬ë„¤</label>
                <label><input type="radio" name="batch-type" value="ìŠˆí¼ì±—"> ğŸ’¬ ìŠˆí¼ì±—</label>
            </div>
        </div>
        <div class="form-group">
            <label>ìŠ¤íŠ¸ë¦¬ë¨¸ë³„ ê¸ˆì•¡(ë§Œì›)</label>
            <div class="streamer-grid">
                <div class="streamer-item">
                    <label>ğŸ«… ì—„ì‚¼ìš©</label>
                    <input type="text" data-streamer="ì—„ì‚¼ìš©" class="form-input streamer-amount" placeholder="0" inputmode="numeric">
                </div>
                <div class="streamer-item">
                    <label>ğŸŒº ì†ë•ë°°</label>
                    <input type="text" data-streamer="ì†ë•ë°°" class="form-input streamer-amount" placeholder="0" inputmode="numeric">
                </div>
                <div class="streamer-item">
                    <label>ğŸ§ ì—°ê¸°</label>
                    <input type="text" data-streamer="ì—°ê¸°" class="form-input streamer-amount" placeholder="0" inputmode="numeric">
                </div>
                <div class="streamer-item">
                    <label>ğŸ‘º ì£¼ì˜¥</label>
                    <input type="text" data-streamer="ì£¼ì˜¥" class="form-input streamer-amount" placeholder="0" inputmode="numeric">
                </div>
                <div class="streamer-item">
                    <label>ğŸ¬ ë¶ˆê³°</label>
                    <input type="text" data-streamer="ë¶ˆê³°" class="form-input streamer-amount" placeholder="0" inputmode="numeric">
                </div>
                <div class="streamer-item">
                    <label>ğŸ ì´íš¨íŒ”</label>
                    <input type="text" data-streamer="ì´íš¨íŒ”" class="form-input streamer-amount" placeholder="0" inputmode="numeric">
                </div>
                <div class="streamer-item">
                    <label>ğŸ˜ ë™ë™</label>
                    <input type="text" data-streamer="ë™ë™" class="form-input streamer-amount" placeholder="0" inputmode="numeric">
                </div>
                <div class="streamer-item">
                    <label>ğŸ¤  ë‚¨ë¶•</label>
                    <input type="text" data-streamer="ë‚¨ë¶•" class="form-input streamer-amount" placeholder="0" inputmode="numeric">
                </div>
                <div class="streamer-item">
                    <label>ğŸ¦† ì˜¥ê¸”</label>
                    <input type="text" data-streamer="ì˜¥ê¸”" class="form-input streamer-amount" placeholder="0" inputmode="numeric">
                </div>
                <div class="streamer-item">
                    <label>ğŸ¦ êµ­ê³ </label>
                    <input type="text" data-streamer="êµ­ê³ " class="form-input streamer-amount" placeholder="0" inputmode="numeric">
                </div>
            </div>
        </div>
        <button onclick="batchAdd()" class="btn btn-success" style="width: 100%; padding: 20px; font-size: 18px;">âœ¨ ì¼ê´„ ë“±ë¡</button>
    </div>

    <!-- ìƒíƒœ ë©”ì‹œì§€ -->
    <div id="status-message"></div>

    <!-- í›„ì› ë‚´ì—­ í…Œì´ë¸” -->
    <div class="section">
        <h2>ğŸ“‹ í›„ì› ë‚´ì—­</h2>
        <div style="margin-bottom: 20px;">
            <button onclick="loadData()" class="btn">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>
            <button onclick="clearAll()" class="btn btn-danger" style="margin-left: 10px;">ğŸ—‘ï¸ ì „ì²´ì‚­ì œ</button>
        </div>
        <table class="table">
            <thead>
                <tr>
                    <th>ë²ˆí˜¸</th>
                    <th>í›„ì›ì</th>
                    <th>ìŠ¤íŠ¸ë¦¬ë¨¸</th>
                    <th>íƒ€ì…</th>
                    <th>ê¸ˆì•¡(ë§Œ)</th>
                    <th>ì‹œê°„</th>
                    <th>ì‚­ì œ</th>
                </tr>
            </thead>
            <tbody id="donation-table">
                <tr>
                    <td colspan="7" style="padding: 40px; color: #666; font-size: 18px;">í›„ì› ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<script>
// ì „ì—­ ë³€ìˆ˜
let donations = JSON.parse(localStorage.getItem('donations') || '[]');

// ìƒíƒœ ë©”ì‹œì§€ í‘œì‹œ
function showStatus(message, type = 'info') {
    const statusEl = document.getElementById('status-message');
    statusEl.className = `status status-${type}`;
    statusEl.textContent = message;
    setTimeout(() => statusEl.textContent = '', 4000);
}

// ë¡œì»¬ ì €ì¥
function saveDonations() {
    localStorage.setItem('donations', JSON.stringify(donations));
}

// ìˆ«ìë§Œ ì…ë ¥ í—ˆìš©
function onlyNumbers(event) {
    const char = String.fromCharCode(event.which);
    if (!/[0-9.]/.test(char)) {
        event.preventDefault();
    }
}

// ë¹ ë¥¸ ë“±ë¡
function quickAdd() {
    const donor = document.getElementById('quick-donor').value.trim();
    const streamer = document.getElementById('quick-streamer').value;
    const amount = parseFloat(document.getElementById('quick-amount').value);
    const type = document.getElementById('quick-type').value;

    if (!donor) {
        showStatus('í›„ì›ìëª…ì„ ì…ë ¥í•˜ì„¸ìš”.', 'error');
        return;
    }
    if (!amount || amount <= 0) {
        showStatus('ì˜¬ë°”ë¥¸ ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”.', 'error');
        return;
    }

    const donation = {
        id: Date.now(),
        donor: donor,
        streamer: streamer,
        type: type,
        amount: amount,
        time: new Date()
    };

    donations.unshift(donation);
    saveDonations();
    document.getElementById('quick-donor').value = '';
    document.getElementById('quick-amount').value = '';
    updateTable();
    showStatus(`${donor}ë‹˜ â†’ ${streamer} ${amount}ë§Œì› ë“±ë¡ì™„ë£Œ!`, 'success');
}

// ì¼ê´„ ë“±ë¡
function batchAdd() {
    const donor = document.getElementById('batch-donor').value.trim();
    const type = document.querySelector('input[name="batch-type"]:checked').value;

    if (!donor) {
        showStatus('í›„ì›ìëª…ì„ ì…ë ¥í•˜ì„¸ìš”.', 'error');
        return;
    }

    const streamerInputs = document.querySelectorAll('.streamer-amount');
    const newDonations = [];

    streamerInputs.forEach(input => {
        const amount = parseFloat(input.value.trim());
        if (!isNaN(amount) && amount > 0) {
            const streamer = input.dataset.streamer;
            newDonations.push({
                id: Date.now() + Math.random(),
                donor: donor,
                streamer: streamer,
                type: type,
                amount: amount,
                time: new Date()
            });
        }
    });

    if (newDonations.length === 0) {
        showStatus('ìµœì†Œ í•˜ë‚˜ì˜ ìŠ¤íŠ¸ë¦¬ë¨¸ì—ê²Œ ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”.', 'error');
        return;
    }

    donations.unshift(...newDonations);
    saveDonations();
    document.getElementById('batch-donor').value = '';
    streamerInputs.forEach(input => input.value = '');
    updateTable();
    showStatus(`${newDonations.length}ê°œ í›„ì›ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!`, 'success');
}

// í…Œì´ë¸” ì—…ë°ì´íŠ¸
function updateTable() {
    const tbody = document.getElementById('donation-table');
    
    if (donations.length === 0) {
        tbody.innerHTML = '<tr><td colspan="7" style="padding: 40px; color: #666; font-size: 18px;">í›„ì› ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
        return;
    }

    tbody.innerHTML = donations.map((d, index) => `
        <tr>
            <td>${index + 1}</td>
            <td class="editable" onclick="editCell(${index}, 'donor')">${d.donor}</td>
            <td class="editable" onclick="editCell(${index}, 'streamer')">${d.streamer}</td>
            <td class="editable" onclick="editCell(${index}, 'type')">${d.type}</td>
            <td class="editable" onclick="editCell(${index}, 'amount')">${d.amount}</td>
            <td>${new Date(d.time).toLocaleString('ko-KR')}</td>
            <td><button onclick="deleteDonation(${index})" class="btn btn-danger" style="padding: 8px 12px;">ì‚­ì œ</button></td>
        </tr>
    `).join('');
}

// ì…€ í¸ì§‘
function editCell(index, field) {
    const currentValue = donations[index][field];
    let newValue;
    
    if (field === 'streamer') {
        const streamers = ['ì—„ì‚¼ìš©', 'ì†ë•ë°°', 'ì—°ê¸°', 'ì£¼ì˜¥', 'ë¶ˆê³°', 'ì´íš¨íŒ”', 'ë™ë™', 'ë‚¨ë¶•', 'ì˜¥ê¸”', 'êµ­ê³ '];
        newValue = prompt(`ìŠ¤íŠ¸ë¦¬ë¨¸ ì„ íƒ:\n${streamers.join(', ')}`, currentValue);
    } else if (field === 'type') {
        const types = ['ê³„ì¢Œ', 'íˆ¬ë„¤', 'ìŠˆí¼ì±—'];
        newValue = prompt(`íƒ€ì… ì„ íƒ:\n${types.join(', ')}`, currentValue);
    } else {
        newValue = prompt(`${field} ìˆ˜ì •:`, currentValue);
    }
    
    if (newValue !== null && newValue.trim() !== '') {
        if (field === 'amount') {
            const amount = parseFloat(newValue);
            if (isNaN(amount) || amount <= 0) {
                showStatus('ì˜¬ë°”ë¥¸ ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”.', 'error');
                return;
            }
            donations[index][field] = amount;
        } else {
            donations[index][field] = newValue.trim();
        }
        saveDonations();
        updateTable();
        showStatus('ìˆ˜ì •ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
    }
}

// í›„ì› ì‚­ì œ
function deleteDonation(index) {
    if (confirm('ì´ í›„ì›ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        donations.splice(index, 1);
        saveDonations();
        updateTable();
        showStatus('í›„ì›ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
    }
}

// ì „ì²´ ì‚­ì œ
function clearAll() {
    if (confirm('ëª¨ë“  í›„ì› ë‚´ì—­ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        donations = [];
        saveDonations();
        updateTable();
        showStatus('ëª¨ë“  í›„ì› ë‚´ì—­ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
    }
}

// ë°ì´í„° ë¡œë“œ
function loadData() {
    donations = JSON.parse(localStorage.getItem('donations') || '[]');
    updateTable();
    showStatus('ë°ì´í„°ë¥¼ ìƒˆë¡œê³ ì¹¨í–ˆìŠµë‹ˆë‹¤.', 'success');
}

// ì´ˆê¸°í™”
document.addEventListener('DOMContentLoaded', function() {
    updateTable();
    
    // ìˆ«ì ì…ë ¥ í•„ë“œ ì„¤ì •
    const numericInputs = document.querySelectorAll('input[inputmode="numeric"]');
    numericInputs.forEach(input => {
        input.addEventListener('keypress', onlyNumbers);
    });
    
    console.log('í›„ì› ê´€ë¦¬ ì‹œìŠ¤í…œì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.');
});
</script>

</body>
</html>